"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const j=require("path"),q=require("fs"),w=require("node:module"),y=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},r=y(j),i=y(q),P=w.createRequire(typeof document>"u"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.cjs",document.baseURI).href),l=r.default.sep,Z={enabled:!0,folderPath:"",outPath:"",zipName:""},z=e=>{let S={...Z,...e},{enabled:s,folderPath:u,outPath:c,zipName:t}=S;if(s=Boolean(s),!u||!c)throw new Error("config.folderPath and config.outPath is required.");u=r.default.resolve(u),c=r.default.resolve(c),t=t||u.split(l).pop()+".zip";const _=()=>{const g=P("jszip"),d=new g,p=function(n,o,a=""){const b=i.default.readdirSync(o);a+=o.split(l).pop()+l,b.forEach(m=>{const f=r.default.join(o,l,m);i.default.statSync(f).isDirectory()?p(n,f,a):n.file(a+m,i.default.readFileSync(f))})},h=(n=t)=>{const o=r.default.join(c,l+n);i.default.existsSync(o)&&i.default.unlinkSync(o)},v=function(){p(d,u),d.generateAsync({type:"nodebuffer",compression:"DEFLATE",compressionOptions:{level:9}}).then(n=>{h(t),i.default.writeFileSync(r.default.join(c,l,t),n)})};h(t),v()};return{name:"vite-plugin-zip-file",apply:"build",closeBundle(){!s||_()}}};exports.viteZip=z;
