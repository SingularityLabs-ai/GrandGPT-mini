import{produce as t}from"immer";import{atom as o}from"jotai/vanilla";import{useCallback as r}from"react";import{useAtom as n}from"jotai/react";function e(r){const n=o(r,(o,r,e)=>r(n,t(o(n),"function"==typeof e?e:()=>e)));return n}const i=new WeakMap;function f(r){return n=()=>o(t=>t(r),(o,n,e)=>n(r,t(o(r),"function"==typeof e?e:()=>e))),(i.has(e=r)?i:i.set(e,n())).get(e);var n,e}function a(o,e){const[i,f]=n(o,e);return[i,r(o=>f(t(o)),[f])]}export{e as atomWithImmer,a as useImmerAtom,f as withImmer};
//# sourceMappingURL=index.modern.mjs.map
